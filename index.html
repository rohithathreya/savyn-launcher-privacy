<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Savyn ‚Äì Your phone as a second brain. Private. Encrypted. On-device.">
    <title>Savyn ‚Äì Unlock Your Second Brain</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <nav class="nav-pill">
        <a href="/" class="logo">Savyn</a>
        <span class="nav-divider"></span>
        <button id="top-cta" class="nav-btn">Early Access</button>
    </nav>

    <canvas id="neural-bg"></canvas>

    <main>
        <!-- Hero: The Unlock -->
        <section class="hero">
            <div class="hero-content">
                <h1 class="hero-title">
                    <span class="line">Your second brain is</span>
                    <span class="line">already on your phone.</span>
                </h1>
                <p class="hero-subtitle">
                    <span class="unlock-text">Just unlock it</span><span class="blink-cursor">.</span>
                </p>
            </div>
            <div class="scroll-hint">
                <div class="mouse"></div>
            </div>
        </section>

        <!-- The Story -->
        <section class="story">
            <!-- Block 1: The Reality -->
            <div class="story-block">
                <p class="story-text">
                    So much of our lives runs through our phone ‚Äî
                </p>
                <div class="cycling-container modes-cycle">
                    <span class="cycle-item active">plan vacations</span>
                    <span class="cycle-item">order food</span>
                    <span class="cycle-item">talk to friends</span>
                    <span class="cycle-item">watch movies</span>
                    <span class="cycle-item">listen to music</span>
                    <span class="cycle-item">track workouts</span>
                    <span class="cycle-item">book cabs</span>
                    <span class="cycle-item">save ideas</span>
                </div>
            </div>

            <!-- Block 2: The Insight -->
            <div class="story-block">
                <p class="story-text reveal-text">
                    Before any journal, productivity app, or even your friends ‚Äî 
                    <em class="glow-text">it knows what you're doing, where, and why.</em>
                </p>
            </div>

            <!-- Block 3: The Question -->
            <div class="story-block center-block">
                <p class="story-text large-text">
                    Instead of just passing this learning to other apps...
                </p>
                <p class="story-accent">
                    What if it began to <span class="shimmer">personalize your experience?</span>
                </p>
            </div>

            <!-- Block 4: The Vision -->
            <div class="story-block glass-card">
                <div class="card-glow"></div>
                <p class="card-text">
                    Unify its learnings from across all your apps, notes, 
                    screenshots, bookmarks into <strong>one real-time brain</strong>
                </p>
            </div>

            <!-- Block 5: The Dream -->
            <div class="story-block">
                <p class="story-text reveal-text">
                    A second brain that <em>"gets"</em> you ‚Äî and always knows 
                    <span class="highlight-box">the right things at the right time</span>
                </p>
            </div>

            <!-- Block 6: The Unlock -->
            <div class="story-block center-block feature-block">
                <p class="story-text">This unlocks uniquely different experiences ‚Äî</p>
                <div class="cycling-container experience-cycle large-cycle">
                    <span class="cycle-item active">thought companion</span>
                    <span class="cycle-item">productivity booster</span>
                    <span class="cycle-item">wellness upgrade</span>
                    <span class="cycle-item">better connectedness</span>
                    <span class="cycle-item">creative catalyst</span>
                    <span class="cycle-item">focus guardian</span>
                    <span class="cycle-item">memory keeper</span>
                    <span class="cycle-item">decision helper</span>
                </div>
            </div>

            <!-- Block 7: The Question -->
            <div class="story-block hero-block">
                <h2 class="big-question">
                    What'll you do with<br>
                    <span class="text-gradient">your second brain?</span>
                </h2>
            </div>
        </section>

        <!-- The Privacy Pledge -->
        <section class="privacy-pledge">
            <div class="pledge-container">
                <div class="pledge-badge">Our Promise</div>
                <div class="pledge-grid">
                    <div class="pledge-item">
                        <div class="pledge-icon">üö´</div>
                        <h3>No Ads</h3>
                        <p>Your attention is yours</p>
                    </div>
                    <div class="pledge-item">
                        <div class="pledge-icon">üëÅÔ∏è‚Äçüó®Ô∏è</div>
                        <h3>No Tracking</h3>
                        <p>We don't follow you around</p>
                    </div>
                    <div class="pledge-item">
                        <div class="pledge-icon">‚òÅÔ∏è</div>
                        <h3>No Cloud Training</h3>
                        <p>Your data never leaves your phone</p>
                    </div>
                </div>
                <p class="pledge-statement">
                    Your data stays on your device. Encrypted. Private.<br>
                    <span class="signature">We don't sell it because we don't even see it.</span>
                </p>
            </div>
        </section>

        <!-- Final CTA: Email Form -->
        <section class="footer-cta" id="signup-section">
            <h2 class="cta-headline">Ready to unlock it?</h2>
            <p class="cta-subtext">Join the early access. Android first.</p>

            <form id="beta-form" class="email-form">
                <input type="email" id="email-input" name="email" placeholder="Enter your email" required>
                <button type="submit" id="submit-btn">Join Beta</button>
            </form>

            <!-- Success state (hidden by default) -->
            <div id="success-state" class="success-state hidden">
                <p class="success-message">üéâ You're in! Check your email, then:</p>
                <a id="play-opt-in-btn" href="#" target="_blank" class="play-btn">
                    Open Google Play to Join Beta
                </a>
                <p class="success-note">If Play says "not a tester yet", wait 2-3 minutes and try again.</p>
            </div>

            <!-- Error state (hidden by default) -->
            <p id="error-message" class="error-message hidden"></p>
        </section>

    </main>

    <footer class="footer">
        <div class="footer-row">
            <a href="privacy-policy.html">Privacy Policy</a>
            <span class="dot">¬∑</span>
            <a href="mailto:support@savynlabs.com">Contact</a>
        </div>
        <div class="footer-row copyright">
            <span>¬© 2025 Savyn Labs</span>
        </div>
    </footer>

    <script>
        // ============================================
        // Neural Background Animation
        // ============================================
        const canvas = document.getElementById('neural-bg');
        const ctx = canvas.getContext('2d');
        
        let neurons = [];
        let synapses = [];
        let pulses = [];
        const neuronCount = 80;
        const synapseDistance = 180;
        
        function resize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight * 3; // Extend for scroll
        }
        
        function createNeurons() {
            neurons = [];
            for (let i = 0; i < neuronCount; i++) {
                neurons.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    vx: (Math.random() - 0.5) * 0.4,
                    vy: (Math.random() - 0.5) * 0.4,
                    radius: Math.random() * 2.5 + 1.5,
                    pulse: Math.random() * Math.PI * 2,
                    pulseSpeed: 0.02 + Math.random() * 0.02
                });
            }
        }
        
        function createPulse() {
            if (neurons.length < 2) return;
            const startNeuron = neurons[Math.floor(Math.random() * neurons.length)];
            const endNeuron = neurons[Math.floor(Math.random() * neurons.length)];
            if (startNeuron === endNeuron) return;
            
            const dx = endNeuron.x - startNeuron.x;
            const dy = endNeuron.y - startNeuron.y;
            const dist = Math.sqrt(dx * dx + dy * dy);
            
            if (dist < synapseDistance * 1.5) {
                pulses.push({
                    startX: startNeuron.x,
                    startY: startNeuron.y,
                    endX: endNeuron.x,
                    endY: endNeuron.y,
                    progress: 0,
                    speed: 0.02 + Math.random() * 0.02
                });
            }
        }
        
        function updateNeurons() {
            neurons.forEach(neuron => {
                neuron.x += neuron.vx;
                neuron.y += neuron.vy;
                neuron.pulse += neuron.pulseSpeed;
                
                if (neuron.x < 0 || neuron.x > canvas.width) neuron.vx *= -1;
                if (neuron.y < 0 || neuron.y > canvas.height) neuron.vy *= -1;
            });
            
            // Update pulses
            pulses = pulses.filter(pulse => {
                pulse.progress += pulse.speed;
                return pulse.progress < 1;
            });
            
            // Occasionally create new pulse
            if (Math.random() < 0.03) createPulse();
        }
        
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw synapses (connections)
            for (let i = 0; i < neurons.length; i++) {
                for (let j = i + 1; j < neurons.length; j++) {
                    const dx = neurons[i].x - neurons[j].x;
                    const dy = neurons[i].y - neurons[j].y;
                    const dist = Math.sqrt(dx * dx + dy * dy);
                    
                    if (dist < synapseDistance) {
                        const opacity = (1 - dist / synapseDistance) * 0.15;
                        ctx.strokeStyle = `rgba(139, 92, 246, ${opacity})`;
                        ctx.lineWidth = 0.5;
                        ctx.beginPath();
                        ctx.moveTo(neurons[i].x, neurons[i].y);
                        ctx.lineTo(neurons[j].x, neurons[j].y);
                        ctx.stroke();
                    }
                }
            }
            
            // Draw pulses
            pulses.forEach(pulse => {
                const x = pulse.startX + (pulse.endX - pulse.startX) * pulse.progress;
                const y = pulse.startY + (pulse.endY - pulse.startY) * pulse.progress;
                const gradient = ctx.createRadialGradient(x, y, 0, x, y, 8);
                gradient.addColorStop(0, 'rgba(139, 92, 246, 0.8)');
                gradient.addColorStop(1, 'rgba(139, 92, 246, 0)');
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(x, y, 8, 0, Math.PI * 2);
                ctx.fill();
            });
            
            // Draw neurons
            neurons.forEach(neuron => {
                const pulseSize = Math.sin(neuron.pulse) * 0.3 + 1;
                const gradient = ctx.createRadialGradient(
                    neuron.x, neuron.y, 0,
                    neuron.x, neuron.y, neuron.radius * 2 * pulseSize
                );
                gradient.addColorStop(0, 'rgba(139, 92, 246, 0.6)');
                gradient.addColorStop(0.5, 'rgba(139, 92, 246, 0.2)');
                gradient.addColorStop(1, 'rgba(139, 92, 246, 0)');
                
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(neuron.x, neuron.y, neuron.radius * 2 * pulseSize, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.fillStyle = 'rgba(139, 92, 246, 0.8)';
                ctx.beginPath();
                ctx.arc(neuron.x, neuron.y, neuron.radius * pulseSize, 0, Math.PI * 2);
                ctx.fill();
            });
        }
        
        function animate() {
            updateNeurons();
            draw();
            requestAnimationFrame(animate);
        }
        
        resize();
        createNeurons();
        animate();
        
        window.addEventListener('resize', () => {
            resize();
            createNeurons();
        });

        // ============================================
        // Cycling Text Animation
        // ============================================
        function initCycling(container, interval = 2000) {
            const items = container.querySelectorAll('.cycle-item');
            let current = 0;
            
            setInterval(() => {
                items[current].classList.remove('active');
                current = (current + 1) % items.length;
                items[current].classList.add('active');
            }, interval);
        }
        
        document.querySelectorAll('.modes-cycle').forEach(c => initCycling(c, 1800));
        document.querySelectorAll('.experience-cycle').forEach(c => initCycling(c, 2200));

        // ============================================
        // Scroll Animations
        // ============================================
        const storyBlocks = document.querySelectorAll('.story-block');
        const pledgeItems = document.querySelectorAll('.pledge-item');
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, { threshold: 0.2, rootMargin: '-50px' });

        storyBlocks.forEach(el => observer.observe(el));
        pledgeItems.forEach((el, i) => {
            el.style.transitionDelay = `${i * 0.15}s`;
            observer.observe(el);
        });

        // CTA button scroll
        document.getElementById('top-cta')?.addEventListener('click', () => {
            document.getElementById('signup-section')?.scrollIntoView({ behavior: 'smooth' });
        });

        // ============================================
        // Beta Signup Form (KEEP INTACT)
        // ============================================
        const API_URL = 'https://savyn-beta-api.savynlabs.workers.dev';

        const betaForm = document.getElementById('beta-form');
        const emailInput = document.getElementById('email-input');
        const submitBtn = document.getElementById('submit-btn');
        const successState = document.getElementById('success-state');
        const playOptInBtn = document.getElementById('play-opt-in-btn');
        const errorMessage = document.getElementById('error-message');

        betaForm?.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const email = emailInput.value.trim();
            if (!email) return;

            // Show loading state
            submitBtn.disabled = true;
            submitBtn.textContent = 'Joining...';
            errorMessage.classList.add('hidden');

            try {
                const response = await fetch(`${API_URL}/join-beta`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email })
                });

                const data = await response.json();

                if (data.ok) {
                    // Success! Show the opt-in button
                    betaForm.classList.add('hidden');
                    successState.classList.remove('hidden');
                    playOptInBtn.href = data.optInUrl;
                } else {
                    // Show error
                    errorMessage.textContent = data.error || 'Something went wrong. Please try again.';
                    errorMessage.classList.remove('hidden');
                    submitBtn.disabled = false;
                    submitBtn.textContent = 'Join Beta';
                }
            } catch (error) {
                console.error('Signup error:', error);
                errorMessage.textContent = 'Network error. Please check your connection and try again.';
                errorMessage.classList.remove('hidden');
                submitBtn.disabled = false;
                submitBtn.textContent = 'Join Beta';
            }
        });
    </script>
</body>
</html>
